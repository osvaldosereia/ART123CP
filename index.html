<!-- index.html -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MeuJus</title>
  <link rel="icon" href="favicon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Topbar -->
  <header class="topbar">
    <img class="logo-img" src="logo-h.png" alt="MeuJus" />
    <button id="btnOpenSearch" class="btn ghost" style="margin-left:auto">Buscar Questões</button>
    <button id="btnCreateExam" class="btn">Gerar Prova</button>
    <button id="examShareLink" class="btn primary">Compartilhar Prova</button>
  </header>

  <!-- Toast -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <!-- Página principal -->
  <main class="page">
    <!-- Chips dos temas ativos no quiz -->
    <div id="quizThemes" class="chips"></div>

    <!-- Container do quiz -->
    <section id="quiz" class="section">
      <ul id="quizList" class="cards"></ul>
      <div id="sentinel"></div>
    </section>

    <!-- Seção de prova -->
    <section id="exam" class="section hidden">
      <header class="exam-head">
        <h1 id="examTitle">Prova</h1>
        <button id="examFinish" class="btn bad">Finalizar</button>
        <button id="examShareLink" class="btn">Compartilhar</button>
      </header>
      <div id="examIntro" class="muted">Selecione questões e gere a prova.</div>
      <ol id="examList" class="exam-list"></ol>
      <div id="examReport" class="exam-report hidden"></div>
    </section>
  </main>

  <!-- Template de questão -->
  <template id="tplQuestion">
    <li class="card">
      <article class="question">
        <header class="q-head">
          <span class="q-meta"></span>
          <button class="btn ghost q-copy" type="button">Copiar</button>
          <button class="btn ghost q-add" type="button">Adicionar à Prova</button>
        </header>
        <div class="q-body"></div>
      </article>
    </li>
  </template>

  <!-- Modal Buscar Questões -->
  <dialog id="searchModal" class="modal" aria-labelledby="mTitle">
    <div class="modal-card">
      <header class="modal-head">
        <h3 id="mTitle">Buscar Questões</h3>
        <button id="btnCloseSearch" class="btn ghost" type="button">Fechar</button>
      </header>

      <div class="modal-body">
        <!-- Disciplina -->
        <label class="lbl">Disciplina</label>
        <div class="dropdown">
          <button class="dd-btn" id="ddDiscBtn" aria-haspopup="listbox" aria-expanded="false">
            <span id="ddDiscLabel">Escolha a disciplina</span>
            <span class="chev">▾</span>
          </button>
          <ul class="dd-list" id="ddDiscList" role="listbox" tabindex="-1"></ul>
        </div>

        <!-- Temas multiselect -->
        <label class="lbl" style="margin-top:12px">Temas</label>
        <div class="ms-panel show">
          <div class="ms-head">
            <input id="msSearch" type="search" placeholder="Filtrar temas…" />
            <div class="ms-actions">
              <button id="msSelAll" type="button" class="btn">Selecionar visíveis</button>
              <button id="msClear" type="button" class="btn ghost">Limpar</button>
            </div>
          </div>
          <div id="msList" class="ms-list"></div>
          <div class="ms-foot">
            <span id="msCount">0 exibidos · 0 selecionados</span>
          </div>
        </div>
      </div>

      <footer class="modal-foot">
        <button id="btnRunSearch" class="btn primary" disabled>Buscar</button>
      </footer>
    </div>
  </dialog>

  <script src="app.js" defer></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/sw.js");
    }
  </script>
</body>
</html>
