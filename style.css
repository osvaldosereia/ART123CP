/* ===== Design tokens: contraste alto, tipografia refinada, minimal ===== */
:root{
  /* Cores base */
  --bg: #f7f8fa;
  --card: #ffffff;
  --text: #0a0a0a;
  --muted: #475569;         /* mais escuro que #6b7280 */
  --line: #cbd5e1;          /* mais visível que #e5e7eb */
  --brand: #2563eb;
  --brand-600: #1d4ed8;
  --good: #15803d;
  --bad: #b91c1c;

  /* Elevação e raio */
  --shadow: 0 6px 18px rgba(2,6,23,.08), 0 2px 6px rgba(2,6,23,.06);
  --radius: 12px;

  /* Tipografia */
  --font: 16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --font-sm: 13px;
  --font-xs: 12px;

  /* Espaços */
  --sp-1: 4px;  --sp-2: 8px;  --sp-3: 12px;  --sp-4: 16px;
  --sp-5: 20px; --sp-6: 24px;

  /* Foco acessível */
  --ring: 2px solid color-mix(in srgb, var(--brand), white 20%);
  --ring-offset: 2px;
}

/* ===== Reset mínimo ===== */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:var(--font);
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
}

/* ===== Contêiner padrão ===== */
.page{
  padding:84px var(--sp-3) var(--sp-4);
  max-width:900px;
  margin:0 auto;
}

/* ===== Topbar minimal ===== */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; gap:var(--sp-3);
  padding:10px var(--sp-3);
  background:var(--card);
  border-bottom:1px solid var(--line);
  transition:transform .18s ease;
  max-width:900px; margin:0 auto;
  backdrop-filter:saturate(180%) blur(6px);
}
.topbar.hide{ transform:translateY(-100%); }
.topbar .logo{ font-weight:700; letter-spacing:.2px; margin-right:auto; }
.topbar #btnHome{ margin-left:auto; }

/* ===== Cartões ===== */
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:var(--sp-4);
  box-shadow:var(--shadow);
}

/* ===== Tipos secundários ===== */
.lbl{ display:block; margin:var(--sp-3) 0 var(--sp-2); color:var(--muted); font-size:var(--font-sm); }
.hint{ color:var(--muted); font-size:var(--font-xs); }
.actions{ margin-top:var(--sp-4); }

/* ===== Controles base (inputs, selects, buscas) ===== */
.input, input[type="text"], input[type="search"], input[type="number"], textarea{
  width:100%;
  background:#fff;
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px 12px;
  font:inherit;
  color:var(--text);
  outline:none;
  transition:border-color .15s ease, box-shadow .15s ease;
}
.input::placeholder, input::placeholder, textarea::placeholder{ color:color-mix(in srgb, var(--muted), white 20%); }
.input:focus, input:focus, textarea:focus{
  border-color:var(--brand);
  box-shadow:0 0 0 var(--ring-offset) #fff, 0 0 0 3px color-mix(in srgb, var(--brand), transparent 60%);
}

/* Botões */
.btn{
  appearance:none;
  border:1px solid var(--line);
  background:#fff;
  color:var(--text);
  padding:10px 14px;
  border-radius:999px;
  cursor:pointer;
  box-shadow:none;
  font-weight:600;
  transition:background .12s ease, border-color .12s ease, transform .06s ease, box-shadow .12s ease;
}
.btn:hover{ background:#f8fafc; }
.btn:focus-visible{ outline:var(--ring); outline-offset:2px; }
.btn:active{ transform:translateY(1px); }
.btn:disabled{ opacity:.45; cursor:not-allowed; }

.btn.ghost{ background:#fff; }
.btn.primary{
  background:var(--brand);
  color:#fff;
  border-color:var(--brand);
  box-shadow:0 1px 0 rgba(0,0,0,.02);
}
.btn.primary:hover{ background:var(--brand-600); border-color:var(--brand-600); }
.btn.ia{ background:#0a0a0a; color:#fff; border-color:#0a0a0a; }

/* ===== Dropdown custom ===== */
.dropdown{ position:relative; }
.dd-btn{
  width:100%;
  display:flex; justify-content:space-between; align-items:center;
  background:#fff;
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px 14px;
  cursor:pointer;
}
.dd-btn:focus-visible{ outline:var(--ring); outline-offset:2px; }
.dd-list{
  list-style:none; margin:6px 0 0; padding:6px 0;
  position:absolute; left:0; right:0; max-height:240px; overflow:auto;
  background:#fff; border:1px solid var(--line); border-radius:10px; box-shadow:var(--shadow); display:none; z-index:20;
}
.dd-list.show{ display:block; }
.dd-list li{ padding:10px 12px; cursor:pointer; }
.dd-list li:hover{ background:#f1f5f9; }
.chev{ opacity:.65; }

/* ===== Lista compacta de temas ===== */
.topics{ display:grid; grid-template-columns:1fr; gap:6px; margin:8px 0; }
.topic{
  display:flex; align-items:flex-start; gap:8px;
  padding:6px 8px; border:1px solid var(--line); border-radius:10px; background:#fff;
  font-size:14px; line-height:1.25; cursor:pointer; user-select:none; text-align:left;
  transition:background .12s ease, border-color .12s ease, color .12s ease;
}
.topic:hover{ background:#f8fafc; }
.topic input{ margin-top:2px; inline-size:14px; block-size:14px; }
.topic.on{ background:#0a0a0a; color:#fff; border-color:#0a0a0a; }
.topic.on input{ accent-color:#fff; }

/* ===== Quiz ===== */
.list{ display:flex; flex-direction:column; gap:14px; }
.q{
  background:#fff; border:1px solid var(--line); border-radius:16px; padding:14px; box-shadow:var(--shadow);
}
.q-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.q-num{ font-weight:700; }
.q-stem{ white-space:pre-wrap; margin:8px 0 10px; }
.q-opts{ margin:0 0 10px 16px; padding:0; }
.q-opts li{
  margin:6px 0; padding:10px;
  border:1px solid var(--line); border-radius:10px; cursor:pointer; transition:background .12s ease, border-color .12s ease;
}
.q-opts li:hover{ background:#f8fafc; }
.q-opts li.lock{ opacity:.7; cursor:default; }
.q-opts li.hit{
  border:2px solid var(--good) !important;
  background:#ecfdf5;
  font-weight:600;
  position:relative;
  opacity:1;
}
.q-opts li.hit::after{
  content:"✓";
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  font-weight:700; color:var(--good);
}
.q.ok{ border:2px solid var(--good); background:#f1fdf7; }
.q.bad{ border:2px solid var(--bad); background:#fef2f2; }
.q-res{ min-height:22px; font-weight:600; }
.q-res.good{ color:var(--good); }
.q-res.bad{ color:var(--bad); }
.q-meta{ font-size:var(--font-xs); color:var(--muted); margin-bottom:6px; }

/* ===== IA menu ===== */
.q-ai{ position:relative; margin:8px 0; }
.ia-menu{
  position:absolute; bottom:46px; left:0; display:none; flex-direction:column; gap:6px;
}
.ia-menu.show{ display:flex; }
.ia-item{
  text-decoration:none; color:#fff; background:var(--brand);
  padding:8px 12px; border-radius:10px; border:1px solid var(--brand-600);
}

/* ===== Sentinel / Toast ===== */
.sentinel{ text-align:center; color:var(--muted); padding:16px; }

.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:16px; z-index:60;
  background:#0a0a0a; color:#fff; box-shadow:var(--shadow); display:none;
  padding:8px 14px; font-size:var(--font-xs); line-height:1.3; border-radius:10px;
  min-width:260px; max-width:90vw; text-align:center; white-space:normal;
}
.toast.show{ display:block; }

/* ===== Multiselect de Temas (painel + home, unificado e mais consistente) ===== */
.ms-trigger{ width:100%; display:flex; justify-content:space-between; align-items:center; }
.ms-panel{
  position:relative; margin-top:8px;
  background:#fff; border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow); padding:8px;
  display:none;
}
.ms-panel.show{ display:block; }
.ms-head{ display:flex; gap:8px; align-items:center; padding-bottom:8px; border-bottom:1px solid var(--line); }
#msSearch{
  flex:1; border:1px solid var(--line); border-radius:10px; padding:10px 12px; font-size:14px;
}
#msSearch:focus{ border-color:var(--brand); box-shadow:0 0 0 3px color-mix(in srgb, var(--brand), transparent 70%); outline:0; }
.ms-actions{ display:flex; gap:6px; }
.ms-list{
  display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr));
  gap:6px; margin-top:8px; max-height:320px; overflow:auto;
}
.ms-item{
  display:flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--line);
  border-radius:10px; cursor:pointer; font-size:14px; transition:background .12s ease, border-color .12s ease, color .12s ease;
}
.ms-item:hover{ background:#f8fafc; }
.ms-item.on{ background:#0a0a0a; color:#fff; border-color:#0a0a0a; }
.ms-item input{ inline-size:14px; block-size:14px; pointer-events:none; }
.ms-foot{ border-top:1px solid var(--line); padding:8px 10px; color:var(--muted); font-size:var(--font-xs); }

/* ===== Chips do quiz ===== */
#quizThemes{ display:flex; flex-wrap:wrap; gap:6px; margin:6px 0 12px; justify-content:center; }
#quizThemes .chip{
  padding:6px 10px; font-size:10px; border-radius:999px; border:1px solid var(--line);
  background:#fff; color:var(--text); cursor:pointer; transition:background .12s ease, border-color .12s ease, color .12s ease;
}
#quizThemes .chip.on{ background:#0a0a0a; color:#fff; border-color:#0a0a0a; }

/* ===== Botão voltar ao topo ===== */
.backtop{
  position:fixed; right:16px; bottom:72px; z-index:60;
  display:none; align-items:center; justify-content:center;
  width:44px; height:44px; border-radius:999px;
  border:1px solid var(--brand); background:var(--brand); color:#fff;
  box-shadow:var(--shadow); cursor:pointer; font-size:18px; line-height:1;
}
.backtop.show{ display:flex; }
.backtop:active{ transform:translateY(1px); }

/* ===== Helpers ===== */
.hidden{ display:none !important; }

/* ===== Responsividade ===== */
@media (min-width:780px){ .topics{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
@media (min-width:1080px){ .topics{ grid-template-columns:repeat(3, minmax(0,1fr)); } }
@media (min-width:900px){
  .page{ padding-top:88px; }
  .ms-list{ grid-template-columns:repeat(3, 1fr); }
}

/* ===== Reduz movimento ===== */
@media (prefers-reduced-motion:reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}

/* ===== Modo escuro opcional ===== */
@media (prefers-color-scheme:dark){
  :root{
    --bg:#0b1220;
    --card:#0f172a;
    --text:#e5e7eb;
    --muted:#94a3b8;
    --line:#243044;
    --shadow: 0 8px 24px rgba(0,0,0,.35);
  }
  .btn{ background:#0f172a; color:#e5e7eb; border-color:#243044; }
  .btn:hover{ background:#111a2e; }
  .dd-btn, .input, input, textarea{ background:#0f172a; border-color:#243044; }
  .dd-list{ background:#0f172a; border-color:#243044; }
  .topic, .ms-item, .q{ background:#0f172a; }
  .q-opts li:hover{ background:#0b1429; }
}
